<!DOCTYPE html>
<html lang="en">

	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<title>Purple Admin</title>
		<!-- plugins:css -->
		<!-- 新 Bootstrap4 核心 CSS 文件 -->
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">
	</head>
	<body>

		<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
		<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
		<!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
		<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
		<!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
		<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
		<link rel="stylesheet" href="../../vendors/iconfonts/mdi/css/materialdesignicons.min.css">
		<link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css">
		<!-- endinject -->
		<!-- plugin css for this page -->
		<!-- End plugin css for this page -->
		<!-- inject:css -->
		<link rel="stylesheet" href="../../css/style.css">
		<!-- endinject -->
		<link rel="shortcut icon" href="../../images/favicon.png" />
		<style type="text/css">
			.bg {
				background: url(../../images/lohin4.jpg) no-repeat center;
				background-size: 100%;
			}
		</style>
		</head>

		<body>
			<div class="container-scroller">
				<div class="container-fluid page-body-wrapper full-page-wrapper ">
					<div class="content-wrapper d-flex bg">
						<div class="row w-100 ">
							<div class="col-lg-4 mx-auto">
								<div class="auth-form-light text-left p-5">
									<div class="brand-logo">
										<img src="../../images/logo.svg">
									</div>
									<h6 class="font-weight-light">Sign in to continue.</h6>
									<form class="pt-3">
										<div class="form-group">
											<input type="text" class="form-control form-control-lg " id="loginname" placeholder="Username" style=" opacity: 0.6; ">
										</div>
										<div class=" form-group">
										<input type="password" class="form-control form-control-lg" id="password" placeholder="Password" style=" opacity: 0.6;">
										</div>
										<div class="mt-3">
											<button type="button" class="btn btn-block  btn-gradient-primary btn-lg font-weight-medium auth-form-btn" id="login-submit-btn"
											 style=" opacity: 0.8;">登录</button>
											<!-- <a class="btn btn-block btn-gradient-primary btn-lg font-weight-medium auth-form-btn" href="../../index.html">登录</a> -->
										</div>
										<div class="my-2 d-flex justify-content-between align-items-center">
											<div class="form-check">
												<label class="form-check-label text-muted">
													<input type="checkbox" class="form-check-input " id="rememberPwd">
													记住密码
												</label>
											</div>
										</div>
										<div class="mb-2" style=" opacity: 0.8;">
											<button type="button" class="btn btn-block btn-facebook auth-form-btn" title="刷脸登录" data-search-open=""
											 data-title="刷脸登录" modal-toggle="modal" data-href="pages/face/face.html" data-width="780" data-height="500">
												<i class="mdi mdi-facebook mr-2"></i>刷脸登录
											</button>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
					<!-- content-wrapper ends -->
				</div>
				<!-- page-body-wrapper ends -->
			</div>
			<!-- container-scroller -->
			<!-- plugins:js -->
			<script src="../../vendors/js/vendor.bundle.base.js"></script>
			<script src="../../vendors/js/vendor.bundle.addons.js"></script>
			<!-- endinject -->
			<!-- inject:js -->
			<script src="../../js/off-canvas.js"></script>
			<script src="../../js/misc.js"></script>
			<!-- endinject -->
			<script>
				$(function() {
							$("#login-submit-btn").click(function() {
								console.log("进来了");
								var username = $("#loginname").val();
								var password = $("#password").val();
								var dataSend = {
									username: username,
									password: password
								};
								console.log(dataSend);
								if ($.trim(username) == "") {
									alert("请填写用户名！");
								} else if ($.trim(username).length < 6 || $.trim(username).length > 20) {
									alert("请输入正确的用户名！");
								} else if ($.trim(password) == "") {
									alert("请输入密码！");
								} else {
									$.ajax({
										type: "POST",
										url: '/user/login',
										data: JSON.stringify(dataSend),
										contentType: "application/json; charset=utf-8",
										dataType: "json",
										async: false,
										success: function(data) {
											if (data.error_code == 201) {
												alert("密码错误！");
											} else if (data.error_code == 202) {
												alert("该用户未注册！");
											} else if (data.error_code == 0) {
												alert("成功登录！");
												window.location.replace("index.html");
											}
										},
										error: function(data) {
											alert("请稍后再试！");
										},
									});
								}
							})
								})
								var user = {
									username:"",
									password:""
								};
							$("#rememberPwd").click(function(){
								user = JSON.stringify(user);
								console.log("这是输入的" + user);
								if($("#rememberPwd").checked){
									sessionStorage.setItem("user",user);
								}
								else{
									   localStorage.removeItem("user",user);
								}
							})
							window.onload = function(){
								 loginname.value = window.sessionStorage.getItem('username');
								 password.value = window.sessionStorage.getItem("password");
							}
			</script>
		</body>

</html>
